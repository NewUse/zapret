How to compile native programs for use in openwrt
-------------------------------------------------

1) <fetch correct version of openwrt>

   cd ~

 <chaos calmer>
   git clone git://git.openwrt.org/15.05/openwrt.git
 <barrier breaker>
   git clone git://git.openwrt.org/14.07/openwrt.git
 <trunk>
   git clone git://git.openwrt.org/openwrt.git

   cd openwrt


2) #go to openwrt directory
   cd ~/openwrt
   #Create custom feed:
   mkdir custom-feed
   cp feeds.conf.default feeds.conf
   echo "src-link custom ~/openwrt/custom-feed/" >> ~/openwrt/feeds.conf

3) #add zapret packages to custom feed
   #create zapret directory structure
   mkdir -p ~/openwrt/custom-feed/zapret
   #copy source code of tpws
   copy tpws to ~/openwrt/custom-feed/zapret/tpws
   #copy source code of nfq
   copy nfq to ~/openwrt/custom-feed/zapret/nfq
   #copy source code of ip2net
   copy ip2net to ~/openwrt/custom-feed/zapret/ip2net

4) ./scripts/feeds update -a
   ./scripts/feeds install -a

4) make menuconfig
   #select your target architecture
   #select packages Network/Zapret/* as "M"

5) make toolchain/compile

6) #For minimal version building twps package only is enough
   make package/tpws/compile
   make package/nfqws/compile
   make package/ip2net/compile
   make package/mdig/compile

7) find bin -name tpws*.ipk
   #take your tpws*.ipk , nfqws*.ipk , ip2net*.ipk, mdig*.ipk from there

